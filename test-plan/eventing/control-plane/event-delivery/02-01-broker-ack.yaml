# Emits a single event and exits
apiVersion: v1
kind: Pod
metadata:
  name: emitter
  namespace: conformance
  labels:
    app: conformance
    case: broker-ack
    component: emitter
spec:
  containers:
  - name: emitter
    image: gcr.io/knative-nightly/knative.dev/eventing/test/test_images/recordevents@sha256:9daab3dca38eabe00287512a430ef6c378d43ccab707ea7e240ea748c5ac32c5
    env:
    - name: POD_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.name
    - name: SYSTEM_NAMESPACE
      valueFrom:
        fieldRef:
          fieldPath: metadata.namespace
    - name: EVENT_GENERATORS
      value: sender
    - name: EVENT_LOGS
      value: logger
    - name: ADD_SEQUENCE
      value: "true"
    - name: INCREMENTAL_ID
      value: "true"
    - name: SINK
      value: http://broker-ingress.knative-eventing.svc.cluster.local/conformance/conformance-broker
    - name: INPUT_EVENT
      value: |
        {
          "specversion" : "1.0",
          "type" : "com.example.conformance",
          "source" : "emitter-conformance",
          "time" : "2022-04-05T17:31:00Z",
          "datacontenttype" : "application/json",
          "data" : {
              "test" : "broker-ack"
          }
        }
  restartPolicy: Never


